

<div class='card'>
  <div class='card-header'>
    <ul class="nav">
      <li class="nav-item">
        <span class="navbar-brand">
          Overview
        </span>
      </li>
      <%= render 'cases/new_support_case_button' %>
    </ul>
  </div>

  <%= render 'clusters/details', cluster: @cluster %>
</div>

<div class='card'>
  <div class='card-header'>
    <ul class="nav">
      <li class="nav-item">
        <span class="navbar-brand">
          Documents
        </span>
      </li>
    </ul>
  </div>

  <ul class="list-group list-group-flush">
    <% @cluster.documents.each do |document| %>
      <li class="list-group-item">
        <%= link_to document.name, document.url, target: '_blank' %>
      </li>
    <% end %>
  </ul>
</div>

<% @cluster.component_groups.each do |group| %>
  <div class='card'>
    <div class='card-header'>
      <ul class="nav">
        <li class="nav-item">
          <span class="navbar-brand">
            <% group_size = group.components.length %>
            <%= group.name %> &mdash; <%= pluralize(group_size, group.component_type.name) %>
          </span>
        </li>
      </ul>
    </div>

    <table class="table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Support type</th>
        </tr>
      </thead>

      <tbody>
      <% group.components.each do |c| %>
        <tr>
          <td width='50%'><%= link_to c.name, component_path(c) %></td>
          <td width='50%'><%= c.readable_support_type.capitalize %></td>
        </tr>
      <% end %>
      </tbody>
    </table>
  </div>
<% end %>
