<% check_groups = cluster.cluster_checks
  .group_by { |c| Check.find(c.check_id).check_category_id }
%>
<% content_for(:subtitle) { "Cluster checks" } %>
<%= render 'partials/tabs', activate: :checks do %>
  <div class="card-body row">
    <div class="col-sm-12">
      <h3><%= cluster.name %> Checks for <%= Date.today.to_formatted_s(:short) %> 2018</h3>
      <% check_groups.each do |group| %>
        <h4><%= CheckCategory.find_by_id(group[0]).name %></h4>
        <%= render 'partials/table',
          collection: cluster.cluster_checks,
          message: 'No cluster checks to display' do %>
          <thead>
            <tr class="nowrap">
              <th>Check</th>
              <th>Command</th>
              <th>Comment</th>
              <th>Result</th>
            </tr>
          </thead>
          <tbody>
            <% group[1].each do |check| %>
              <% cluster_check = Check.find(check.check_id) %>
              <tr class="case-highlight">
                <td style="width: 30%;"><%= cluster_check.name %></td>
                <td style="width: 20%;">
                  <p style="color: #ea3ea6; font-style: italic;">
                  <%= cluster_check.command %>
                  </p>
                </td>
                <td style="width: 40%;"><input type="text" style="width: 100%"/></td>
                <td class="nowrap">
                  <button class="btn btn-primary">
                    <i class="fa fa-check" style="color: #18bcb0;"></i>
                  </button>
                  <button class="btn btn-primary">
                    <i class="fa fa-remove" style="color: red;"></i>
                  </button>
                  <button class="btn btn-primary">N/A</button>
                </td>
              </tr>
            <% end %>
          </tbody>
        <% end %>
      <% end %>
    </div>
  </div
<% end %>
