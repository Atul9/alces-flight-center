<% if @case.open? && !@case.consultancy? %>
  <%
      modal_id = 'escalateModal'
      modal_label = 'escalateModalLabel'
  %>

  <%= button_tag 'Escalate',
    {
      class: 'btn btn-warning btn-sm ml-2',
      data: {
        toggle: 'modal',
        target: "##{modal_id}",
      }
    }
  %>

  <div
    class="modal fade"
    id="<%= modal_id %>"
    tabindex="-1"
    role="dialog"
    aria-labelledby="<%= modal_label %>"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="<%= modal_label %>">
            Escalating this support case may incur charges
          </h5>
          <button class="close" data-dismiss="modal">Ã—</button>
        </div>
        <div class="modal-body">
          <p>Escalating a support case means that the case becomes potentially
            chargeable, and may incur a charge of support credits.</p>
          <p>Do you wish to continue?</p>
        </div>
        <div class="modal-footer">
          <button class="btn btn-outline-primary" data-dismiss="modal">
            Cancel
          </button>
          <%= link_to 'Escalate',
                      escalate_case_path(@case.id),
                      class: 'btn btn-outline-warning',
                      id: 'confirm-escalate-button',
                      method: :post,
                      role: 'button'
          %>
        </div>
      </div>
    </div>
  </div>

<% end %>
