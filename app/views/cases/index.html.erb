<%
  empty_message = 'No cases match the criteria you have specified.'
%>

<%= content_for(:subtitle) do
  "Showing #{@cases.length} #{'case'.pluralize(@cases.length)}"
end %>
<%= render 'partials/tabs', activate: :cases do %>
  <form class="form" id="filter-form">
    <%= render 'partials/table',
        collection: @cases,
        message: empty_message,
        responsive: false do %>
      <thead>
        <tr class="nowrap">
          <th>ID</th>
          <th>Date</th>
          <th>
            <%= render 'cases/filters/filter_for', caption: 'State', name: 'state', filters: @filters, title: 'Filter by case state' %>
          </th>
          <th>Creator</th>
          <th>Subject</th>
          <th>
            <%= render 'cases/filters/filter_for', caption: 'Assigned to', name: 'assigned_to', filters: @filters, title: 'Filter by assignee' %>
          </th>
          <th>Affected components</th>
          <th>Credit usage</th>
        </tr>
      </thead>

      <tbody class="assigned-cases">
        <% @cases.assigned_to(current_user).decorate.each do |c| %>
          <%= render 'partials/case_table_row', kase: c, scope: @scope %>
        <% end %>
      </tbody>

      <tbody>
        <% @cases.not_assigned_to(current_user).decorate.each do |c| %>
          <%= render 'partials/case_table_row', kase: c, scope: @scope %>
        <% end %>
      </tbody>
    <% end %>
  </form>
<% end %>

