<% decorated_model = model.decorate %>

<div class='card'>
  <div class='card-header'>
    <ul class="nav">
      <li class="nav-item">
        <span class="navbar-brand">
          Asset Record
        </span>
      </li>
    </ul>
  </div>

  <%= form_tag decorated_model.asset_record_path, method: 'PATCH' do %>
    <table class="table table-responsive">
      <thead>
        <tr>
          <th>Field</th>
          <th>Value</th>
        </tr>
      </thead>

      <tbody>
        <% model.asset_record.each do |record| %>
          <tr>
            <% definition_id = record.definition.id %>
            <td><%= label_tag(definition_id, record.name) %></td>
            <% input = text_field_tag(definition_id, record.value) %>
            <td><%= action == 'show' ? record.value : input %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
    <% button_class = { class: ['btn', 'btn-dark', 'btn-block'] } %>
    <%= if action == 'edit'
          submit_tag "Submit", **button_class
        elsif current_user.admin?
          link_to 'Edit',
                  decorated_model.edit_asset_record_path,
                  role: 'button',
                  **button_class
        end %>
  <% end %>
</div>

