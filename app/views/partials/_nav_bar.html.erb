<nav class="navbar navbar-expand-lg navbar-dark product-bar fixed-top">
  <button
    class="navbar-toggler"
    type="button"
    data-toggle="collapse"
    data-target="#navbarSupportedContent"
    aria-controls="navbarSupportedContent"
    aria-expanded="false"
    aria-label="Toggle navigation"
  >
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">

      <% if signed_in? %>
        <% if current_user.admin? %>
          <%= render 'partials/nav_link',
                     text: 'All Sites',
                     path: root_path,
                     icon: 'fa-globe' %>
        <% end %>

        <% if @scope %>
          <% site_obj = (@scope.is_a?(Site) ? @scope : @scope.site) %>
          <% path_for_site = if current_user.admin?
                               site_path site_obj
                             else
                               root_path
                             end %>
          <%= render 'partials/nav_link',
                     text: site_obj.name,
                     path: path_for_site,
                     icon: 'fa-institution' %>
        <% end %>

        <%#   <% if @cluster %>
        <%#     <li class="nav-item">%>
        <%#       <%= link_to (raw('<span class="fa fa-server"></span> ') + @cluster.name),%>
        <%#         @cluster.decorate.path,%>
        <%#         class: "nav-link #{(@cluster_part || @component_group) ? '' : 'nav-link--active'}"%>
        <%#       %>

        <%#       <% if @component_group %>
        <%#         <li class="nav-item">%>
        <%#           <%= link_to (raw('<span class="fa fa-cubes"></span> ') + @component_group.name),%>
        <%#             @component_group.decorate.path,%>
        <%#             class: "nav-link #{@cluster_part ? '' : 'nav-link--active'}"%>
        <%#           %>
        <%#         </li>%>
        <%#       <% end %>

        <%#       <% if @cluster_part %>
        <%#         <li class="nav-item">%>
        <%#           <%= link_to (raw('<span class="fa fa-cube"></span> ') + @cluster_part.name),%>
        <%#             @cluster_part.decorate.path,%>
        <%#             class: 'nav-link nav-link--active'%>
        <%#           %>
        <%#         </li>%>
        <%#       <% end %>

        <%#     </li>%>
        <%#   <% end %>
        <%# <% end %>

      <% end %>

    </ul>

    <% if signed_in? %>
      <% if current_user.admin? %>
        <ul class="navbar-nav justify-content-end">
          <li class="nav-item">
            <%= link_to (raw('<span class="fa fa-database"></span> ') + 'Admin Interface'),
              rails_admin_path,
              class: "nav-link"
            %>
          </li>
        </ul>
      <% end %>

      <span class="navbar-text text-light"><%= current_user.name %></span>
      <%= button_to 'Sign out',
        sign_out_path,
        method: :delete,
        class: ['btn', 'btn-light']
      %>
    <% end %>
  </div>
</nav>

